{% load static %}
{% load filters %}
<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Sorts+Mill+Goudy|Raleway:100' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" media="all" href="{% get_static_prefix %}css/sk_skeleton.css" >
<link rel="stylesheet" type="text/css" media="all" href="{% get_static_prefix %}css/sk_base.css" >
<link rel="stylesheet" type="text/css" media="all" href="{% get_static_prefix %}css/sk_layout.css" >
<link rel="stylesheet" type="text/css" media="all" href="{% get_static_prefix %}css/super2.css" >
        <style type="text/css">
          body {background-image:url("{% get_static_prefix %}images/heaven.jpg"); background-size:100%}
        </style>

<script type="text/javascript" src="{% get_static_prefix %}js/jquery.js"></script>
 <script type="text/javascript">
  function feedbackPopup() {
  window.open("/feedback/", "feedbackWindow", "status=1, height = 600, width = 600, resizable = 0")
  }
  </script>
<title>Clothesliner Home Page</title>		
<script type="text/javascript">

var p = jQuery.parseJSON('{{measurements|escapejs|safe}}');
p.sort();

function sortOptions(sel)
{
	var my_options = $("#"+sel+" option");
	my_options.sort(function(a,b) {
	    if (a.text > b.text) return 1;
	    else if (a.text < b.text) return -1;
	    else return 0
	})
	$("#"+sel).empty().append( my_options );
}

function genDesigners()
{
	var z = document.getElementById("designers");
	for (var key in p)
	{
		var newOption = document.createElement("OPTION");
		newOption.text = key;
		newOption.value = key;
		z.add(newOption, null);
	}
	
	sortOptions("designers");
	genStyles(z);
}

function genStyles(sel)
{
	var z = document.getElementById("styles");
	while(z.length > 0)
	{
	   z.remove(0);
	}
	for (var key in p[sel[sel.selectedIndex].value])
	{
		var newOption = document.createElement("OPTION");
		newOption.text = key;
		newOption.value = key;
		z.add(newOption, null);
	}
	sortOptions("styles");
	genMeasurements(sel, z);
}

function genMeasurements(des, sel)
{
	var z = document.getElementById("measurements");
	while(z.length > 0)
	{
		z.remove(0);
	}
	for (var key in p[des[des.selectedIndex].value][sel[sel.selectedIndex].value])
	{
		var a = p[des[des.selectedIndex].value][sel[sel.selectedIndex].value][key];
		var newOption = document.createElement("OPTION");
		if (a[1] == "0") {a[1] = "Unhemmed"}
		else if (a[1] == "1.729") {a[1] = "N/A"}
                if (a[1] == "N/A") {newOption.text = a[0]}
                else {
                newOption.text = a[0]+' x '+a[1]}
		newOption.value = a[0]+' '+a[1]+' '+a[2]+' '+a[3];
		z.add(newOption, null);
	}
}
</script>

<!-- start Mixpanel <script type="text/javascript">var mpq=[];mpq.push(["init","22c229665c519c7fb9b7a703e0df621e"]);(function(){var b,a,e,d,c;b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=(document.location.protocol==="https:"?"https:":"http:")+"//api.mixpanel.com/site_media/js/api/mixpanel.js";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);e=function(f){return function(){mpq.push([f].concat(Array.prototype.slice.call(arguments,0)))}};d=["init","track","track_links","track_forms","register","register_once","identify","name_tag","set_config"];for(c=0;c<d.length;c++){mpq[d[c]]=e(d[c])}})();
</script> end Mixpanel -->
</head>

<body onload="genDesigners()">
<div id="container" class="container" style="margin-top:20px">
  <div id="logocontainer" class="sixteen columns">
  <img alt="Clothesliner logo" class="scale-with-grid" src="{% get_static_prefix %}images/biglogo.png" width="960">
  </div><!--logocontainer-->
  <div id="right_home" class="nine columns offset-by-five">
    <div id="searchform" class="searchform">
      <div id="tag1" class="tagline seven columns offset-by-one">
      <h3>Choose a pant you know...</h3>
      </div><!--closes #tag1-->
      <div id="selectors">
      <form action="/demonstration/reference/" method="post" name="selectReferencePant">
       {% csrf_token %}
       <div class="dropdown seven columns offset-by-one">
       <h4>Brand</h4>
       <select id="designers" class="initialdropdown" name="designers" onchange="genStyles(this)"></select>
       </div><!--closes .dropdown-->
       <div class="dropdown seven columns offset-by-one">
       <h4 for="styles">Style</h4>
       <select id="styles" class="initialdropdown" name="styles" onchange="genMeasurements(designers, this)"></select>
       </div><!--closes .dropdown-->
       <div class="dropdown seven columns offset-by-one">
       <h4 for="measurements">Size</h4>
       <select id="measurements" class="initialdropdown" name="measurements"></select>
       </div><!--closes .dropdownXS-->
       <input type="submit" class="signupbutton" value="Compare">
     </form>
     </div><!--closes #selectors-->
    <div id="tag2" class="tagline seven columns offset-by-one">
    <h3>we'll return more like it.</h3>
    </div><!--closes #tag2-->
    </div><!--closes #searchform-->
  </div><!--closes #right home -->

<!--<div id="pantpic" class="six columns">
          <img src="{% get_static_prefix %}images/Arrow_PK.svg" class="drawnpant scale-with-grid" style="max-width:300px"/>
</div>-->

<div id="footer" class="twelve columns offset-by-two">
    <hr>
    <div id="footerlinks">
      <ul>
        <li><a href="/create/">Enter a Pant</a></li>
        <li><a href="/demonstration/about/">About</a></li>
        <li><a href="http://www.clothesliner.tumblr.com/">Tumblr</a></li>
	<li><a href="/">How it Works</a></li>
      </ul>
    </div> <!--closes the footerlinks div-->
    </hr>
  </div> <!--closes the footer div-->
</div> <!--closes the container div-->


</body>
</html>
